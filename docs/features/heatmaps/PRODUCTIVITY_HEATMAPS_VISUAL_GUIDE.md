# ğŸ“Š Productivity Heatmaps - Visual Guide

## HourlyProductivityHeatmapWidget

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ• Productividad por Hora        Individual [Toggle] â•‘
â•‘  Horas trabajadas por franja horaria                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                        â•‘
â•‘  00h â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  0.0h              â•‘
â•‘  01h â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  0.0h              â•‘
â•‘  02h â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  0.0h              â•‘
â•‘  ...                                                   â•‘
â•‘  08h â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  0.5h              â•‘
â•‘  09h â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  1.2h              â•‘
â•‘  10h â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  2.8h â­ PEAK     â•‘
â•‘  11h â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  4.5h              â•‘
â•‘  12h â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  3.2h              â•‘
â•‘  13h â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  1.5h              â•‘
â•‘  14h â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  2.1h              â•‘
â•‘  15h â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  3.8h              â•‘
â•‘  16h â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  4.2h              â•‘
â•‘  17h â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  3.5h              â•‘
â•‘  18h â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  2.0h              â•‘
â•‘  19h â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  0.9h              â•‘
â•‘  20h â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  0.3h              â•‘
â•‘  ...                                                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Legend: Menor [â–‘][â–’][â–“][â–ˆ][â–ˆ] Mayor                 â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ“Š Insights                                          â•‘
â•‘  â˜€ï¸  Mayor productividad en horario matutino (9-12h) â•‘
â•‘  ğŸ“ˆ  Pico de actividad a las 10:00 AM                â•‘
â•‘  ğŸ“…  Promedio de 6.5 horas/dÃ­a                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### CaracterÃ­sticas:
- 24 barras horizontales (una por hora)
- Color coding con 5 niveles de intensidad
- IdentificaciÃ³n automÃ¡tica del pico horario
- Toggle para cambiar entre vista individual/equipo
- Insights generados automÃ¡ticamente

---

## WeeklyProductivityHeatmapWidget

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ“… Productividad por DÃ­a         Individual [Toggle]          â•‘
â•‘  Mapa de calor hora Ã— dÃ­a de la semana                         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘      9h    12h   15h   18h   21h                               â•‘
â•‘ Lun  0.5   1.5   0.8   0.5   0.0                               â•‘
â•‘      â–‘â–‘    â–’â–’    â–‘â–‘    â–‘â–‘    â–‘â–‘                                â•‘
â•‘                                                                 â•‘
â•‘ Mar  0.8   2.1   1.8   1.2   0.0   â­ DÃA MÃS PRODUCTIVO       â•‘
â•‘      â–’â–’    â–“â–“    â–“â–“    â–’â–’    â–‘â–‘                                â•‘
â•‘                                                                 â•‘
â•‘ MiÃ©  0.6   1.8   1.2   0.9   0.0                               â•‘
â•‘      â–’â–’    â–“â–“    â–’â–’    â–’â–’    â–‘â–‘                                â•‘
â•‘                                                                 â•‘
â•‘ Jue  0.7   1.9   1.5   1.0   0.0                               â•‘
â•‘      â–’â–’    â–“â–“    â–“â–“    â–’â–’    â–‘â–‘                                â•‘
â•‘                                                                 â•‘
â•‘ Vie  0.4   1.2   0.9   0.6   0.0                               â•‘
â•‘      â–‘â–‘    â–’â–’    â–’â–’    â–‘â–‘    â–‘â–‘                                â•‘
â•‘                                                                 â•‘
â•‘ SÃ¡b  0.2   0.8   0.0   0.0   0.0                               â•‘
â•‘      â–‘â–‘    â–‘â–‘    â–‘â–‘    â–‘â–‘    â–‘â–‘                                â•‘
â•‘                                                                 â•‘
â•‘ Dom  0.0   0.0   0.0   0.0   0.0                               â•‘
â•‘      â–‘â–‘    â–‘â–‘    â–‘â–‘    â–‘â–‘    â–‘â–‘                                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Legend: Menor [â–‘][â–’][â–“][â–ˆ][â–ˆ] Mayor                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ“Š Insights                                                   â•‘
â•‘  ğŸ“…  Martes es tu dÃ­a mÃ¡s productivo                          â•‘
â•‘  â°  Pico de productividad: Martes 10:00 AM                   â•‘
â•‘  ğŸ“ˆ  Promedio de 6.2 horas/dÃ­a laboral                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### CaracterÃ­sticas:
- Matriz de calor 7 dÃ­as Ã— mÃºltiples horas
- Scroll horizontal para ver todas las franjas
- Tooltips interactivos por celda
- IdentificaciÃ³n de patrones semanales
- Color coding consistente con el widget horario
- Toggle individual/equipo

---

## Color Coding System

Los colores representan la intensidad de productividad:

```
â–‘â–‘ Muy Baja  (<20%)  - surfaceContainerHighest
â–’â–’ Baja      (20-40%) - primaryContainer 40%
â–“â–“ Media     (40-60%) - primaryContainer 60%
â–ˆâ–ˆ Alta      (60-80%) - primary 70%
â–ˆâ–ˆ Muy Alta  (>80%)   - primary 100%
```

---

## Dashboard Integration

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ  Dashboard                                         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  [+] Agregar Widget                                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                       â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚ ğŸ“Š Resumen del DÃ­a                    [â‰¡][Ã—]â”‚    â•‘
â•‘  â”‚ Tareas: 5   Proyectos: 2   Horas: 6.5      â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•‘                                                       â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚ ğŸ• Productividad por Hora         [â‰¡][Ã—]    â”‚    â•‘
â•‘  â”‚ [Hourly Heatmap Widget]                     â”‚    â•‘
â•‘  â”‚                                              â”‚    â•‘
â•‘  â”‚ 09h â–“â–“â–‘â–‘â–‘ 1.2h                              â”‚    â•‘
â•‘  â”‚ 10h â–“â–“â–“â–“â–‘ 2.8h â­                           â”‚    â•‘
â•‘  â”‚ 11h â–“â–“â–“â–“â–“ 4.5h                              â”‚    â•‘
â•‘  â”‚ ...                                          â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•‘                                                       â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘
â•‘  â”‚ ğŸ“… Productividad por DÃ­a          [â‰¡][Ã—]    â”‚    â•‘
â•‘  â”‚ [Weekly Heatmap Matrix]                     â”‚    â•‘
â•‘  â”‚                                              â”‚    â•‘
â•‘  â”‚      9h  12h  15h  18h                      â”‚    â•‘
â•‘  â”‚ Lun  â–‘â–‘  â–’â–’   â–‘â–‘   â–‘â–‘                       â”‚    â•‘
â•‘  â”‚ Mar  â–’â–’  â–“â–“   â–“â–“   â–’â–’  â­                   â”‚    â•‘
â•‘  â”‚ ...                                          â”‚    â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Features del Dashboard:
- âœ… Drag & drop para reordenar widgets
- âœ… BotÃ³n [â‰¡] para arrastrar
- âœ… BotÃ³n [Ã—] para eliminar
- âœ… Hover para mostrar controles
- âœ… ConfiguraciÃ³n persistente
- âœ… Widgets totalmente responsivos

---

## API Response Example

```json
{
  "success": true,
  "message": "Heatmap data retrieved successfully",
  "data": {
    "hourlyData": [
      0, 0, 0, 0, 0, 0, 0, 0.5, 1.2, 2.8, 4.5, 3.2, 
      1.5, 0.8, 2.1, 3.8, 4.2, 3.5, 2.0, 0.9, 0.3, 0, 0, 0
    ],
    "weeklyData": [0.5, 6.8, 7.2, 6.5, 5.1, 2.8, 0],
    "hourlyWeeklyMatrix": [
      [0, 0, ...], // Domingo
      [0.5, 1.2, ...], // Lunes
      [0.8, 2.1, ...], // Martes (mÃ¡s productivo)
      // ... resto de dÃ­as
    ],
    "totalHours": 42.5,
    "avgHoursPerDay": 6.07,
    "peakHour": 10,
    "peakDay": 2,
    "topProductiveSlots": [
      { "day": 2, "hour": 10, "hours": 4.5 },
      { "day": 2, "hour": 11, "hours": 4.2 },
      { "day": 1, "hour": 10, "hours": 3.8 }
    ],
    "insights": [
      {
        "type": "peak_morning",
        "message": "Mayor productividad en horario matutino (9-12h)",
        "icon": "morning"
      },
      {
        "type": "peak_weekday",
        "message": "Martes es tu dÃ­a mÃ¡s productivo",
        "icon": "calendar"
      },
      {
        "type": "high_productivity",
        "message": "Promedio alto de 6.1 horas/dÃ­a",
        "icon": "trending_up"
      }
    ],
    "totalLogs": 48
  }
}
```

---

## Usage Examples

### Adding to Dashboard
```dart
// Usuario hace click en "Agregar Widget"
// Selecciona "Productividad por Hora"
// Sistema crea:
DashboardWidgetConfig(
  id: 'hourly_heatmap_123',
  type: DashboardWidgetType.hourlyProductivityHeatmap,
  position: 5,
  isVisible: true,
)
```

### Calling Backend API
```bash
# Individual view - Ãºltimos 7 dÃ­as
GET /api/timelogs/heatmap?startDate=2024-10-07&endDate=2024-10-13&teamView=false

# Team view - Ãºltimo mes, proyecto especÃ­fico
GET /api/timelogs/heatmap?startDate=2024-09-13&endDate=2024-10-13&teamView=true&projectId=42&workspaceId=7
```

---

## Insights Types

| Type | Message Example | Icon | Trigger Condition |
|------|----------------|------|-------------------|
| peak_morning | Mayor productividad en horario matutino (9-12h) | morning â˜€ï¸ | Peak hour entre 9-12 |
| peak_afternoon | Mayor productividad en horario vespertino (14-18h) | afternoon ğŸŒ† | Peak hour entre 14-18 |
| peak_weekday | Martes es tu dÃ­a mÃ¡s productivo | calendar ğŸ“… | Peak day entre Lun-Vie |
| high_productivity | Promedio alto de 6.5 horas/dÃ­a | trending_up ğŸ“ˆ | Avg > 6 horas/dÃ­a |
| low_productivity | Promedio bajo de 2.5 horas/dÃ­a | trending_down ğŸ“‰ | Avg < 3 horas/dÃ­a |

---

## Interactive Features

### Hourly Widget
- âœ… Hover sobre barra â†’ muestra tooltip con hora exacta
- âœ… Toggle individual/equipo â†’ recarga datos
- âœ… IdentificaciÃ³n visual del pico (â­)
- âœ… AnimaciÃ³n suave de colores

### Weekly Widget  
- âœ… Hover sobre celda â†’ tooltip con "DÃ­a HH:MM - X.Xh"
- âœ… Scroll horizontal para ver todas las horas
- âœ… IdentificaciÃ³n del dÃ­a mÃ¡s productivo
- âœ… Click en celda â†’ (futuro) drill-down a tareas

---

## Performance Considerations

### Backend
- âœ… Single query para obtener todos los time logs
- âœ… CÃ¡lculos en memoria (eficiente)
- âœ… Ãndice en startTime para queries rÃ¡pidas
- âœ… Filtros opcionales (no sobrecarga)

### Frontend
- âœ… Lazy loading de widgets
- âœ… Datos cacheados en provider
- âœ… Rebuild solo cuando cambian datos
- âœ… Scroll performance optimizado

---

## Security

- âœ… JWT authentication required
- âœ… Individual view: auto-filtra por userId
- âœ… Team view: solo workspace members
- âœ… Input validation con express-validator
- âœ… Rate limiting aplicado
- âœ… CORS configurado

---

This visual guide shows exactly how the productivity heatmaps look and function in the application.
